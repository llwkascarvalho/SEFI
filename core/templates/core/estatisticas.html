{% extends 'core/base.html' %}
{% load static %}
{% block content %}
{% block css %}
<link rel="stylesheet" href="{% static 'core/css/index.css' %}">
<link rel="stylesheet" href="{% static 'core/css/estatisticas.css' %}">
{% endblock %}

<div class="container-header">
    <h1>Estatísticas do Sistema</h1>
    <p>Aqui você pode ver dados relevantes do sistema!</p>
</div>

<div class="container">
    <div class="container-card">
        <div class="container-conteudo">
            <p class="title-card">Solicitações esse mês</p>
            <div class="info-card">
                <p class="number-card">2</p>
            </div>
        </div>
    </div>
    <div class="container-card">
        <div class="container-conteudo">
            <p class="title-card">Exercícios</p>
            <div class="info-card">
                <p class="number-card">2</p>
            </div>
        </div>
    </div>
    <div class="container-card">
        <div class="container-conteudo">
            <p class="title-card">Provas</p>
            <div class="info-card">
                <p class="number-card">2</p>
            </div>
        </div>
    </div>
    <div class="container-card2">
        <div class="container-conteudo-inferiores">
            <p class="title-card">Solicitações por Semana</p>
            <div id="chart-container" style="width: 100%; height: 356px;"></div> <!-- Chart container -->
        </div>
    </div>
    <div class="container-row">
        <div class="container-card">
            <div class="container-conteudo">
                <p class="title-card">Professor mais ativo</p>
                <div class="info-card">
                    <p class="number-card">Irlan Arley</p>
                </div>
            </div>
        </div>
        <div class="container-card3">
            <div class="container-conteudo">
                <p class="title-card">Tipos de atividade</p>
                <div class="info-card">
                    <div id="pie-chart-container" style="width: 240px; height: 240px;"></div> <!-- Pie chart container -->
                </div>
            </div>
        </div>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/echarts/dist/echarts.min.js"></script>
<script>
document.addEventListener('DOMContentLoaded', function () {
    var chartDom = document.getElementById('chart-container');
    var myChart = echarts.init(chartDom);
    var option = {
        color: ["rgb(48,70,95)", "#D05759", "#FD8744", "#FFB95A", "#82B572", "#47A563", "#1BC0C4", "#083684", "#973A93", "#9884DC", "#5C60C6", "#E68FC2"],
        grid: { show: false, top: 36, right: 36, left: 60, bottom: 36, borderWidth: 1 },
        xAxis: {
            show: true,
            type: 'category',
            axisLabel: { show: true, color: 'rgb(130,136,152)', fontFamily: 'Inter', width: 32, overflow: 'truncate' },
            axisLine: { show: false, lineStyle: { color: '#a1a9bc' } },
            axisTick: { show: false, lineStyle: { color: 'rgba(130,136,152,0.5)' } },
            splitLine: { show: false, lineStyle: { color: ['rgba(130,136,152,0.5)'], width: 1, type: 'dashed' } },
            splitArea: { show: false, areaStyle: { color: ['rgba(130,136,152,0.04)', 'rgba(130,136,152,0.12)'] } },
            boundaryGap: true,
            data: ["1", "2", "3", "4"]
        },
        yAxis: {
            show: true,
            type: 'value',
            splitNumber: 4,
            axisLabel: { show: true, color: 'rgb(130,136,152)', fontFamily: 'Inter' },
            axisLine: { show: false, lineStyle: { color: '#a1a9bc' } },
            axisTick: { show: false, lineStyle: { color: 'rgba(130,136,152,0.5)' } },
            splitLine: { show: false, lineStyle: { color: ['rgba(130,136,152,0.5)'], width: 1, type: 'dashed' } },
            splitArea: { show: false, areaStyle: { color: ['rgba(130,136,152,0.04)', 'rgba(130,136,152,0.12)'] } }
        },
        series: [{
            type: 'bar',
            showSymbol: false,
            barCategoryGap: 32,
            colorBy: 'series',
            itemStyle: { borderColor: '#000', borderWidth: 0, borderType: 'solid', borderRadius: [4, 4, 0, 0], opacity: 1 },
            label: { show: false, position: 'top', color: '#a1a9bc', fontSize: 11, fontFamily: 'Inter' },
            backgroundStyle: { color: 'rgba(48,70,95,0.08)', borderColor: '#000', borderWidth: 0, borderType: 'solid', borderRadius: [0, 0, 0, 0], opacity: 1 },
            symbolSize: 6,
            symbol: 'emptyCircle',
            showBackground: false,
            data: [28.5, 28.5, 28.5, 28.5]
        }]
    };
    myChart.setOption(option);

    var pieChartDom = document.getElementById('pie-chart-container');
    var pieChart = echarts.init(pieChartDom);
    var pieOption = {
        color: ["rgb(48,70,95)", "rgb(95,48,48)", "#FD8744", "#FFB95A", "#82B572", "#47A563", "#1BC0C4", "#083684", "#973A93", "#9884DC", "#5C60C6", "#E68FC2"],
        backgroundColor: "transparent",
        legend: {
            left: "right",
            show: false,
            type: "plain",
            top: "top",
            orient: "horizontal",
            padding: [12, 16, 12, 16],
            inactiveColor: "#ccc",
            textStyle: { color: "#333333", fontSize: 11, fontFamily: "Inter" },
            icon: "circle",
            itemWidth: 8,
            itemHeight: 8
        },
        dataset: {
            source: [
                { value: "7", name: "Exercício" },
                { value: "1", name: "Prova" }
            ]
        },
        series: [{
            startAngle: 180,
            endAngle: 360,
            padAngle: 0,
            roseType: false,
            itemStyle: { borderWidth: 0, borderColor: "rgb(0,0,0)", borderRadius: 0, borderType: "solid" },
            name: "Access From",
            type: "pie",
            radius: ["45%", "80%"],
            center: ["50%", "70%"],
            label: { show: true, position: "inside", color: "rgb(234,234,234)" }
        }]
    };
    pieChart.setOption(pieOption);
});
</script>

{% endblock %}